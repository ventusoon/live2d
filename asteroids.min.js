/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /gh/stevenjoezhang/asteroids@0.0.1/asteroids.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function Asteroids(){window.ASTEROIDS||(window.ASTEROIDS={enemiesKilled:0});class t{constructor(t,e){"Object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}cp(){return new t(this.x,this.y)}mul(t){return this.x*=t,this.y*=t,this}mulNew(e){return new t(this.x*e,this.y*e)}add(t){return this.x+=t.x,this.y+=t.y,this}addNew(e){return new t(this.x+e.x,this.y+e.y)}sub(t){return this.x-=t.x,this.y-=t.y,this}subNew(e){return new t(this.x-e.x,this.y-e.y)}rotate(t){const e=this.x,s=this.y;return this.x=e*Math.cos(t)-Math.sin(t)*s,this.y=e*Math.sin(t)+Math.cos(t)*s,this}rotateNew(t){return this.cp().rotate(t)}setAngle(t){const e=this.len();return this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this}setAngleNew(t){return this.cp().setAngle(t)}setLength(t){const e=this.len();return e?this.mul(t/e):this.x=this.y=t,this}setLengthNew(t){return this.cp().setLength(t)}normalize(){const t=this.len();return this.x/=t,this.y/=t,this}normalizeNew(){return this.cp().normalize()}angle(){return Math.atan2(this.y,this.x)}collidesWith(t){return this.x>t.x&&this.y>t.y&&this.x<t.x+t.width&&this.y<t.y+t.height}len(){const t=Math.sqrt(this.x*this.x+this.y*this.y);return t<.005&&t>-.005?0:t}is(t){return"object"==typeof t&&this.x===t.x&&this.y===t.y}toString(){return"[Vector("+this.x+", "+this.y+") angle: "+this.angle()+", length: "+this.len()+"]"}}const e=this,s=!!window.ActiveXObject;let i=document.documentElement.clientWidth,n=document.documentElement.clientHeight;const o=[[-15,-10],[-15,10],[15,0]],l=["HTML","HEAD","BODY","SCRIPT","TITLE","META","STYLE","LINK","SHAPE","LINE","GROUP","IMAGE","STROKE","FILL","SKEW","PATH","TEXTPATH"],h=["BR","HR"],r=s?20:40,a=s?10:20;function d(){for(let t of e.enemies)t.classList.remove("ASTEROIDSYEAHENEMY");const t=document.body.getElementsByTagName("*");e.enemies=[];for(let s,i=0;s=t[i];i++)!l.includes(s.tagName.toUpperCase())&&"g_vml_"!==s.prefix&&A(s)&&"ASTEROIDSYEAH"!==s.className&&s.offsetHeight>0&&(s.aSize=m(s),e.enemies.push(s),s.classList.add("ASTEROIDSYEAHENEMY"),s.aAdded||(s.aAdded=!0,e.totalEnemies++))}let c;function u(t){return t*Math.PI/180}function p(t,e){return Math.floor(Math.random()*(e+1)+t)}function m(t){let e=t,s=0,i=0;do{s+=e.offsetLeft||0,i+=e.offsetTop||0,e=e.offsetParent}while(e);return{x:s,y:i,width:t.offsetWidth||10,height:t.offsetHeight||10}}function y(t){for(let e of window.ASTEROIDSPLAYERS)e.gameContainer.style.visibility=t}function f(t,e){y("hidden");let s=document.elementFromPoint(t,e);return s?(3===s.nodeType&&(s=s.parentNode),y("visible"),s):(y("visible"),!1)}function g(s){const i=(new Date).getTime(),n=r;for(let o=0;o<n;o++)e.particles.push({dir:new t(20*Math.random()-10,20*Math.random()-10).normalize(),pos:s.cp(),cameAlive:i})}function w(){e.points.innerHTML=10*window.ASTEROIDS.enemiesKilled}function A(t){if(t.offsetLeft<-100&&t.offsetWidth>0&&t.offsetHeight>0)return!1;if(h.includes(t.tagName))return!0;if(0===t.offsetWidth&&0===t.offsetHeight)return!1;for(let e=0;e<t.childNodes.length;e++)if(!h.includes(t.childNodes[e].tagName)&&0!==t.childNodes[e].childNodes.length)return!1;return!0}this.flame={r:[],y:[]},this.toggleBlinkStyle=function(){this.updated.blink.isActive?document.body.classList.remove("ASTEROIDSBLINK"):document.body.classList.add("ASTEROIDSBLINK"),this.updated.blink.isActive=!this.updated.blink.isActive},function(t,e){const s=document.createElement("style");s.rel="stylesheet",s.id="ASTEROIDSYEAHSTYLES";try{s.innerHTML=t+"{"+e+"}"}catch(i){s.styleSheet.addRule(t,e)}document.getElementsByTagName("head")[0].appendChild(s)}(".ASTEROIDSBLINK .ASTEROIDSYEAHENEMY","outline: 2px dotted red;"),this.pos=new t(100,100),this.lastPos=!1,this.vel=new t(0,0),this.dir=new t(0,1),this.keysPressed={},this.firedAt=!1,this.updated={enemies:!1,flame:(new Date).getTime(),blink:{time:0,isActive:!1}},this.scrollPos=new t(0,0),this.bullets=[],this.enemies=[],this.dying=[],this.totalEnemies=0,this.particles=[],d(),function(){const t=15;c=function(){e.flame.r=[[-15,-10]],e.flame.y=[[-15,-6]];for(let s=0;s<20;s+=2)e.flame.r.push([-p(2,7)-t,s-10]);e.flame.r.push([-15,10]);for(let s=0;s<12;s+=2.4000000000000004)e.flame.y.push([-p(2,7)-t,s-6]);e.flame.y.push([-15,6])}}(),c(),this.gameContainer=document.createElement("div"),this.gameContainer.className="ASTEROIDSYEAH",document.body.appendChild(this.gameContainer),this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width",i),this.canvas.setAttribute("height",n),this.canvas.className="ASTEROIDSYEAH",Object.assign(this.canvas.style,{width:i+"px",height:n+"px",position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px",zIndex:"10000"}),this.canvas.addEventListener("mousedown",(function(t){const e=document.createElement("span");e.style.position="absolute",e.style.color="red",e.innerHTML="Press Esc to Quit",document.body.appendChild(e);const s=t.pageX||t.clientX+document.documentElement.scrollLeft,i=t.pageY||t.clientY+document.documentElement.scrollTop;e.style.left=s-e.offsetWidth/2+"px",e.style.top=i-e.offsetHeight/2+"px",setTimeout((function(){try{e.parentNode.removeChild(e)}catch(t){}}),1e3)}),!1);const E=function(){e.canvas.style.display="none",i=document.documentElement.clientWidth,n=document.documentElement.clientHeight,e.canvas.setAttribute("width",i),e.canvas.setAttribute("height",n),Object.assign(e.canvas.style,{display:"block",width:i+"px",height:n+"px"})};window.addEventListener("resize",E,!1),this.gameContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="black",this.ctx.strokeStyle="black",document.getElementById("ASTEROIDS-NAVIGATION")?(this.navigation=document.getElementById("ASTEROIDS-NAVIGATION"),this.points=document.getElementById("ASTEROIDS-POINTS")):(this.navigation=document.createElement("div"),this.navigation.id="ASTEROIDS-NAVIGATION",this.navigation.className="ASTEROIDSYEAH",Object.assign(this.navigation.style,{fontFamily:"Arial,sans-serif",position:"fixed",zIndex:"10001",bottom:"20px",right:"10px",textAlign:"right"}),this.navigation.innerHTML="(Press Esc to Quit) ",this.gameContainer.appendChild(this.navigation),this.points=document.createElement("span"),this.points.id="ASTEROIDS-POINTS",this.points.style.font="28pt Arial, sans-serif",this.points.style.fontWeight="bold",this.points.className="ASTEROIDSYEAH",this.navigation.appendChild(this.points)),w();const S=function(t){switch(e.keysPressed[t.key]=!0,t.key){case" ":e.firedAt=1}if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"," ","b","w","a","s","d"].includes(t.key))return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,t.cancelBubble=!0,!1};document.addEventListener("keydown",S,!1);const x=function(t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"," ","w","a","s","d"].includes(t.key))return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,t.cancelBubble=!0,!1};document.addEventListener("keypress",x,!1);const v=function(t){if(e.keysPressed[t.key]=!1,["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"," ","b","w","a","s","d"].includes(t.key))return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,t.cancelBubble=!0,!1};document.addEventListener("keyup",v,!1),this.ctx.clear=function(){this.clearRect(0,0,i,n)},this.ctx.clear(),this.ctx.drawLine=function(t,e,s,i){this.beginPath(),this.moveTo(t,e),this.lineTo(s,i),this.lineTo(s+1,i+1),this.closePath(),this.fill()},this.ctx.tracePoly=function(t){this.beginPath(),this.moveTo(t[0][0],t[0][1]);for(let e=1;e<t.length;e++)this.lineTo(t[e][0],t[e][1]);this.closePath()},this.ctx.drawPlayer=function(){this.save(),this.translate(e.pos.x,e.pos.y),this.rotate(e.dir.angle()),this.tracePoly(o),this.fillStyle="white",this.fill(),this.tracePoly(o),this.stroke(),this.restore()},this.ctx.drawBullets=function(t){for(let e=0;e<t.length;e++)this.beginPath(),this.arc(t[e].pos.x,t[e].pos.y,2,0,2*Math.PI,!0),this.closePath(),this.fill()};this.ctx.drawParticles=function(t){const e=this.fillStyle;for(let e=0;e<t.length;e++)this.fillStyle=["red","yellow"][p(0,1)],this.drawLine(t[e].pos.x,t[e].pos.y,t[e].pos.x-10*t[e].dir.x,t[e].pos.y-10*t[e].dir.y);this.fillStyle=e},this.ctx.drawFlames=function(t){this.save(),this.translate(e.pos.x,e.pos.y),this.rotate(e.dir.angle());const s=this.strokeStyle;this.strokeStyle="red",this.tracePoly(t.r),this.stroke(),this.strokeStyle="yellow",this.tracePoly(t.y),this.stroke(),this.strokeStyle=s,this.restore()},g(this.pos),document.body.classList.add("ASTEROIDSYEAH");let T=(new Date).getTime();function b(){e.update.call(e)}function P(){document.removeEventListener("keydown",S,!1),document.removeEventListener("keypress",x,!1),document.removeEventListener("keyup",v,!1),window.removeEventListener("resize",E,!1),function(t){const e=document.getElementById(t);e&&e.parentNode.removeChild(e)}("ASTEROIDSYEAHSTYLES"),document.body.classList.remove("ASTEROIDSYEAH"),this.gameContainer.parentNode.removeChild(this.gameContainer)}setTimeout(b,20),this.update=function(){let t=!1;const s=(new Date).getTime(),o=(s-T)/1e3;T=s;let h=!1;if(s-this.updated.flame>50&&(c(),this.updated.flame=s),this.scrollPos.x=window.pageXOffset||document.documentElement.scrollLeft,this.scrollPos.y=window.pageYOffset||document.documentElement.scrollTop,this.keysPressed.ArrowUp||this.keysPressed.w?(this.vel.add(this.dir.mulNew(300*o)),h=!0):this.vel.mul(.96),(this.keysPressed.ArrowLeft||this.keysPressed.a)&&(t=!0,this.dir.rotate(u(360*o*-1))),(this.keysPressed.ArrowRight||this.keysPressed.d)&&(t=!0,this.dir.rotate(u(360*o))),this.keysPressed[" "]&&s-this.firedAt>150&&(this.bullets.unshift({dir:this.dir.cp(),pos:this.pos.cp(),startVel:this.vel.cp(),cameAlive:s}),this.firedAt=s,this.bullets.length>a&&this.bullets.pop()),this.keysPressed.b?(this.updated.enemies||(d(),this.updated.enemies=!0),t=!0,this.updated.blink.time+=1e3*o,this.updated.blink.time>250&&(this.toggleBlinkStyle(),this.updated.blink.time=0)):this.updated.enemies=!1,this.keysPressed.Escape)P.apply(this);else{this.vel.len()>600&&this.vel.setLength(600),this.pos.add(this.vel.mulNew(o)),this.pos.x>i?(window.scrollTo(this.scrollPos.x+50,this.scrollPos.y),this.pos.x=0):this.pos.x<0&&(window.scrollTo(this.scrollPos.x-50,this.scrollPos.y),this.pos.x=i),this.pos.y>n?(window.scrollTo(this.scrollPos.x,this.scrollPos.y+.75*n),this.pos.y=0):this.pos.y<0&&(window.scrollTo(this.scrollPos.x,this.scrollPos.y-.75*n),this.pos.y=n);for(let e=this.bullets.length-1;e>=0;e--){if(s-this.bullets[e].cameAlive>2e3){this.bullets.splice(e,1),t=!0;continue}const h=this.bullets[e].dir.setLengthNew(700*o).add(this.bullets[e].startVel.mulNew(o));this.bullets[e].pos.add(h),(r=this.bullets[e].pos).x>i?r.x=0:r.x<0&&(r.x=i),r.y>n?r.y=0:r.y<0&&(r.y=n);const a=f(this.bullets[e].pos.x,this.bullets[e].pos.y);a&&a.tagName&&!l.includes(a.tagName.toUpperCase())&&A(a)&&"ASTEROIDSYEAH"!==a.className&&(g(this.bullets[e].pos),this.dying.push(a),this.bullets.splice(e,1))}var r;if(this.dying.length){for(let t=this.dying.length-1;t>=0;t--)try{this.dying[t].parentNode&&window.ASTEROIDS.enemiesKilled++,this.dying[t].parentNode.removeChild(this.dying[t])}catch(t){}w(),this.dying=[]}for(let e=this.particles.length-1;e>=0;e--)this.particles[e].pos.add(this.particles[e].dir.mulNew(400*o*Math.random())),s-this.particles[e].cameAlive>1e3&&(this.particles.splice(e,1),t=!0);(t||0!==this.bullets.length||0!==this.particles.length||!this.pos.is(this.lastPos)||this.vel.len()>0)&&(this.ctx.clear(),this.ctx.drawPlayer(),h&&this.ctx.drawFlames(e.flame),this.bullets.length&&this.ctx.drawBullets(this.bullets),this.particles.length&&this.ctx.drawParticles(this.particles)),this.lastPos=this.pos,setTimeout(b,20)}}}window.ASTEROIDSPLAYERS||(window.ASTEROIDSPLAYERS=[]),window.ASTEROIDSPLAYERS.push(new Asteroids);
//# sourceMappingURL=/sm/11c4e7a22171c1c39b0b58533518bd4e303418e9eb0ce8a3a516c30b9a6a630c.map